<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoramento Agr√≠cola</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:wght@300;400;600;700&display=swap" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <link rel="stylesheet" href="../css/style.css"/>
</head>

<body>
    <div class="noise"></div>

    <div class="wrapper">
        <header>
            <div class="header-left">
                <div class="logo-icon">üåø</div>

                <div>
                    <div class="header-title">Monitoramento de Estufa</div>
                    <div class="header-sub">Wokwi + Node.js + Java Spring API ‚Äî MySQL</div>
                </div>
            </div>
            
            <div class="header-right">
                <span class="last-update" id="last-update">‚Äî</span>
                
                <div class="status-badge">
                    <div class="pulse" id="status-pulse"></div>

                    <span id="status-text">Conectando...</span>
                </div>
            </div>
        </header>
        
        <div id="error-banner">
            ‚ö† N√£o foi poss√≠vel conectar √† API. Verifique se o servidor Java est√° rodando em <strong>localhost:8080</strong>.
        </div>
        
        <div class="main-grid">
            <div class="card metric-card c-red">
                <div class="card-label"><span class="dot" style="background:var(--red)"></span>Temperatura Ar</div>
                <div><span class="card-value c-red" id="temperatura">‚Äî</span><span class="card-unit">¬∞C</span></div>
                <div class="bar-container"><div class="bar-fill" id="bar-temperatura" style="background:var(--red)"></div></div>
                <div class="card-footer">Faixa ideal: 18 ‚Äì 28¬∞C</div>
            </div>
            
            <div class="card metric-card c-teal">
                <div class="card-label"><span class="dot" style="background:var(--teal)"></span>Umidade</div>
                <div><span class="card-value c-teal" id="umidade">‚Äî</span><span class="card-unit">%</span></div>
                <div class="bar-container"><div class="bar-fill" id="bar-umidade" style="background:var(--teal)"></div></div>
                <div class="card-footer">Faixa ideal: 50 ‚Äì 80%</div>
            </div>
            
            <div class="card metric-card c-blue">
                <div class="card-label"><span class="dot" style="background:var(--blue)"></span>Press√£o</div>
                <div><span class="card-value c-blue" id="pressao">‚Äî</span><span class="card-unit">hPa</span></div>
                <div class="bar-container"><div class="bar-fill" id="bar-pressao" style="background:var(--blue)"></div></div>
                <div class="card-footer">Press√£o atmosf√©rica</div>
            </div>
            
            <div class="card metric-card c-amber">
                <div class="card-label"><span class="dot" style="background:var(--amber)"></span>Luminosidade</div>
                <div><span class="card-value c-amber" id="luminosidade">‚Äî</span><span class="card-unit">lux</span></div>
                <div class="bar-container"><div class="bar-fill" id="bar-luminosidade" style="background:var(--amber)"></div></div>
                <div class="card-footer">N√≠vel de ilumina√ß√£o</div>
            </div>
        </div>
        
        <div class="row-2">
            <div class="card metric-card c-green">
                <div class="card-label"><span class="dot" style="background:var(--green)"></span>Temperatura Solo</div>
                <div><span class="card-value c-green" id="temp_solo">‚Äî</span><span class="card-unit">¬∞C</span></div>
                <div class="bar-container"><div class="bar-fill" id="bar-temp-solo" style="background:var(--green)"></div></div>
                <div class="card-footer">Sensor de solo</div>
            </div>
            
            <div class="card metric-card c-purple">
                <div class="card-label"><span class="dot" style="background:var(--purple)"></span>Dist√¢ncia</div>
                <div><span class="card-value c-purple" id="distancia">‚Äî</span><span class="card-unit">cm</span></div>
                <div class="bar-container"><div class="bar-fill" id="bar-distancia" style="background:var(--purple)"></div></div>
                <div class="card-footer">Sensor ultrass√¥nico</div>
            </div>
            
            <div class="card metric-card">
                <div class="card-label"><span class="dot" style="background:var(--amber)"></span>Presen√ßa (PIR)</div>

                <div id="presenca-badge" class="presenca-badge clear">
                    <span id="presenca-icon">‚úì</span>
                    <span id="presenca-text">Nenhuma detec√ß√£o</span>
                </div>
                
                <div class="card-footer" id="presenca-footer">PIR sensor</div>
            </div>
        </div>
        
        <div class="row-3">
            <div class="card">
                <div class="section-header">
                    <span class="section-title">üå°Ô∏è Temperatura Ar & Solo</span>
                </div>
                
                <canvas id="chartTemperatura" height="180"></canvas>
            </div>
            
            <div class="card">
                <div class="section-header">
                    <span class="section-title">üíß Umidade & Luminosidade</span>
                </div>
                
                <canvas id="chartUmidade" height="180"></canvas>
            </div>
        </div>
        
        <div class="card" style="margin-top:20px;">
            <div class="section-header">
                <span class="section-title">üìã √öltimos Registros</span>
                <span class="section-title" id="table-count"></span>
            </div>
            
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th style="text-align:left">Data / Hora</th>
                            <th>Temp. Ar</th>
                            <th>Umidade</th>
                            <th>Press√£o</th>
                            <th>Luminosidade</th>
                            <th>Temp. Solo</th>
                            <th>Dist√¢ncia</th>
                            <th>Presen√ßa</th>
                        </tr>
                    </thead>
                    
                    <tbody id="table-body">
                        <tr>
                            <td colspan="8" style="text-align:center;color:var(--muted);padding:24px;">Carregando dados...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script src="../js/script.js"></script>
</body>

</html>